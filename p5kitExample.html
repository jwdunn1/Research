<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="author" content="James William Dunn">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Example | p5kit | canvas & svg</title>
  <script type="text/javascript" src="p5kit.js"></script>
  <style>
    html,body {
      margin: auto;
      min-height: 100%;
      background-color: rgb(11,11,11);
      display: flex;
      overflow: hidden;
    }
    main {
      width: 100%;
      display: flex;
      align-items: flex-start;
    }
    canvas,svg {
      max-width: 33.33%;
      display: inline;
    }
  </style>
</head>
<body>
<main>
<canvas id="_"></canvas><svg id="_1_"></svg><canvas id="_2_"></canvas>
</main>
<script>
// global rotation speed
var rinc=0.001;

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
// GLOBAL mode canvas sketch
var r=0,curColor="#200",dir=1;
function polygon(r, n) {
  beginShape();
  for (let i=0,a=TAU/n; i<TAU; i+=a)
    vertex(r*cos(i),r*sin(i));
  return endShape(CLOSE);
}

function setup() {
  let r=createCanvas(500,500);
  r.onmouseover=()=>{curColor = "#c00";dir=-1};
  r.onmouseout=()=>{curColor = "#200";dir=1};
  pixelDensity(2);
  noStroke();
}

function draw() {
  background(127);
  translate(250, 250);
  rotate(r);
  if(mouseIsPressed&&curColor=="#200") //handle touch
    {curColor = "#c00";dir=-1;}
  fill(curColor);
  polygon(220,8);
  r+=rinc*dir;
}


////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
// INSTANCE mode svg sketch 1
let c1 = function(p) {
  var x,r=0;

  p.polygon=function(r, n) {
    p.beginShape();
    for (let i=0,a=p.TAU/n; i<p.TAU; i+=a)
      p.vertex(r*p.cos(i),r*p.sin(i));
    return p.endShape(p.CLOSE);
  }

  p.setup=function() {
    let r=p.createCanvas(500,500);
    p.curColor = "#020";
    r.onmouseover=()=>{p.curColor = "#0c0";p.dir=-1;}
    r.onmouseout=()=>{p.curColor = "#020";p.dir=1;}
    p.background(100);
    p.noStroke();
    p.translate(250, 250);
    x=p.polygon(220,5);
    p.dir=1;
  }

  p.draw = function() {
    x.style.rotate=r+"rad";
    if(p.mouseIsPressed&&p.curColor=="#020") //handle touch
      {p.curColor = "#0c0";p.dir=-1;}
    x.setAttribute("fill",p.curColor);
    r+=rinc*p.dir;
  }
};
new p5(c1, "_1_");


////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
// INSTANCE mode canvas sketch 2
let c2 = function(p) {
  var r=0;

  p.polygon=function(r, n) {
    p.beginShape();
    for (let i=0,a=p.TAU/n; i<p.TAU; i+=a)
      p.vertex(r*p.cos(i),r*p.sin(i));
    return p.endShape(p.CLOSE);
  }

  p.setup=function() {
    let r=p.createCanvas(500,500);
    p.curColor = "#002";
    r.onmouseover=()=>{p.curColor = "#00c";p.dir=-1;}
    r.onmouseout=()=>{p.curColor = "#002";p.dir=1;}
    p.pixelDensity(2);
    p.noStroke();
    p.dir=1;
  }

  p.draw=function() {
    p.background(127);
    p.translate(250, 250);
    p.rotate(r);
    if(p.mouseIsPressed&&p.curColor=="#002") //handle touch
      {p.curColor = "#00c";p.dir=-1;}
    p.fill(p.curColor);
    p.polygon(220,6);
    r+=rinc*p.dir;
  }

};
new p5(c2, "_2_");
</script>
</body>
</html>